{"version":3,"file":"utils.js","sourceRoot":"/","sources":["utils.ts"],"names":[],"mappings":";;;AAAA,4DAA4B;AAQf,QAAA,UAAU,GAAG,CAAC,IAAwB,EAAU,EAAE;IAC7D,IAAI,IAAI,KAAK,SAAS,EAAE;QACtB,OAAO,gBAAM,EAAE,CAAC,MAAM,EAAE,CAAA;KACzB;IAED,OAAO,gBAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,MAAM,EAAE,CAAA;AACtC,CAAC,CAAA;AAEY,QAAA,iBAAiB,GAAG,CAAC,kBAA0B,EAAE,gBAA+B,EAAiB,EAAE;IAC9G,IAAI,CAAC,kBAAkB,IAAI,CAAC,gBAAgB;QAAE,OAAO,IAAI,CAAA;IAEzD,OAAO,gBAAM,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,gBAAM,CAAC,kBAAkB,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,CAAA;AAC9E,CAAC,CAAA;AAEY,QAAA,mBAAmB,GAAG,CAAO,IAAY,EAA4B,EAAE;IAGlF,IAAI,CAAC,IAAI;QAAE,OAAO,IAAI,CAAA;IAEtB,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;IAEnD,MAAM,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAEpC,IAAI,IAAI,GAAkB,IAAI,CAAA;IAC9B,IAAI,QAAQ,GAAkB,IAAI,CAAA;IAClC,IAAI,OAAO,GAAkB,IAAI,CAAA;IAEjC,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;QACtB,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;QACf,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;QACnB,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;KACnB;IAED,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;QACtB,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;QACf,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;KACnB;IAED,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;QACtB,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;KAChB;IAED,OAAO;QACL,IAAI;QACJ,QAAQ;QACR,OAAO;KACR,CAAA;AACH,CAAC,CAAA,CAAA;AAEY,QAAA,YAAY,GAAG,CAAO,IAAY,EAAE,EAAE;IACjD,MAAM,yBAAyB,GAAG,KAAK,CAAA;IACvC,MAAM,qBAAqB,GAAG,oBAAoB,CAAA;IAElD,IAAI,CAAC,IAAI;QAAE,OAAO,IAAI,CAAA;IAEtB,MAAM,SAAS,GAAG,IAAI;SACnB,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC;SAClC,OAAO,CAAC,yBAAyB,EAAE,GAAG,CAAC;SACvC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;SAClB,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;SACvB,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;SACvB,IAAI,EAAE,CAAA;IAET,OAAO,SAAS,CAAA;AAClB,CAAC,CAAA,CAAA;AAEY,QAAA,SAAS,GAAG,CAAO,OAAe,EAAE,OAAe,EAAE,gBAAkC,EAAE,EAAE;IACtG,MAAM,WAAW,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,KAAK,gBAAgB,GAAG,CAAC,CAAC,CAAC,EAAE,CAAA;IACtE,MAAM,WAAW,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;IACrD,OAAO,OAAO,CAAC,GAAG,CAAC,YAAY,OAAO,IAAI,WAAW,GAAG,WAAW,EAAE,CAAC,CAAA;AACxE,CAAC,CAAA,CAAA","sourcesContent":["import moment from 'moment';\n\nexport interface Location {\n  city: string | null;\n  province: string | null;\n  country: string | null\n}\n\nexport const formatDate = (date: moment.MomentInput): string => {\n  if (date === 'Present') {\n    return moment().format()\n  }\n\n  return moment(date, 'MMMY').format()\n}\n\nexport const getDurationInDays = (formattedStartDate: string, formattedEndDate: Date | string): number | null => {\n  if (!formattedStartDate || !formattedEndDate) return null\n  // +1 to include the start date\n  return moment(formattedEndDate).diff(moment(formattedStartDate), 'days') + 1\n}\n\nexport const getLocationFromText = async (text: string): Promise<Location | null> => {\n  // Text is something like: Amsterdam Oud-West, North Holland Province, Netherlands\n\n  if (!text) return null\n\n  const cleanText = text.replace(' Area', '').trim();\n\n  const parts = cleanText.split(', ');\n\n  let city: null | string = null\n  let province: null | string = null\n  let country: null | string = null\n\n  if (parts.length === 3) {\n    city = parts[0]\n    province = parts[1]\n    country = parts[2]\n  }\n\n  if (parts.length === 2) {\n    city = parts[0]\n    country = parts[1]\n  }\n\n  if (parts.length === 1) {\n    city = parts[0]\n  }\n\n  return {\n    city,\n    province,\n    country\n  }\n}\n\nexport const getCleanText = async (text: string) => {\n  const regexRemoveMultipleSpaces = / +/g\n  const regexRemoveLineBreaks = /(\\r\\n\\t|\\n|\\r\\t)/gm\n\n  if (!text) return null\n\n  const cleanText = text\n    .replace(regexRemoveLineBreaks, '')\n    .replace(regexRemoveMultipleSpaces, ' ')\n    .replace('...', '')\n    .replace('See more', '')\n    .replace('See less', '')\n    .trim()\n\n  return cleanText\n}\n\nexport const statusLog = async (section: string, message: string, scraperSessionId?: string | number) => {\n  const sessionPart = (scraperSessionId) ? ` (${scraperSessionId})` : ''\n  const messagePart = (message) ? `: ${message}` : null\n  return console.log(`Scraper (${section})${sessionPart}${messagePart}`)\n}\n\n"]}